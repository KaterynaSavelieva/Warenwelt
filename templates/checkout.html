{% extends "base.html" %}
{% block title %}Checkout{% endblock %}

{% block content %}
<div class="page-container">

  <h1 class="page-title">Checkout</h1>
  <p class="page-subtitle">
    Please review your order before continuing.
  </p>

  <div class="divider"></div>

  {# ---------------- ORDER SUMMARY TABLE ---------------- #}
  <table class="product-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Category</th>
        <th class="num">Price / Unit</th>
        <th class="num">Quantity</th>
        <th class="num">Total</th>
      </tr>
    </thead>

    <tbody>
      {% for p in items %}
      <tr>
        <td>{{ p.product_id }}</td>
        <td>{{ p.product }}</td>
        <td>{{ p.category }}</td>
        <td class="num">{{ p.price|eur }} €</td>
        <td class="num">{{ p.quantity }}</td>
        <td class="num">{{ p.line_total|eur }} €</td>
      </tr>
      {% endfor %}
    </tbody>

    <tfoot>
      <tr>
        <td colspan="5" class="order-total-label">
          Order Total:
        </td>
        <td class="num order-total-value">
          {{ total|eur }} €
        </td>
      </tr>

      {% if is_company %}
      <tr>
        <td colspan="6" class="company-discount-info">
          (Company customer – 5% discount applied)
        </td>
      </tr>
      {% endif %}
    </tfoot>
  </table>

  <div class="divider"></div>

  {# ---------------- SHIPPING METHOD + PLACE ORDER ---------------- #}
  <form method="post"
        action="{{ url_for('checkout') }}"
        class="checkout-form">

    <p class="checkout-field">
      <label for="shipping_method" class="checkout-label">
        Shipping method:
      </label>
      <select name="shipping_method"
              id="shipping_method"
              class="checkout-select">
        <option value="standard">Standard shipping (3–5 days)</option>
        <option value="express">Express shipping (1–2 days)</option>
      </select>
    </p>

    <button type="submit" class="card-btn checkout-submit">
      Place order
    </button>
  </form>

  <div class="checkout-back-link">
    <a href="{{ url_for('cart_view') }}" class="nav-link">
      Back to cart
    </a>
  </div>

</div>
{% endblock %}
